<!doctype html>
<html lang="ko">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1" />
	<title>Younghoon Potfolio</title>
	<link rel="stylesheet" type="text/css" href="../../library/css/common.css">
	<script type="text/javascript" src="../../library/js/jquery.1.12.4.js"></script>
</head>
<style type="text/css">
/* common */
.wrap {position:relative;}
.inner {max-width:1100px; height: 100%;  margin: 0 auto;}
.com_tit01 {font-family: 'NotoB'; font-size:120px; color:#fff; text-align: center;}
.com_txt01 {max-width:70%; margin:0 auto; font-family: 'NotoR'; font-size:32px; color:#fff; text-align: center;;}

/* main */

/* 헤더 */
.header_wrap {position: fixed; left:0; top:0; z-index:100; width:100%; height:70px; border-bottom:1px solid rgba(255,255,255,.2); transition: background .5s;}
.header_wrap .logo {margin-top:15px; padding-left:20px; font-size:24px; color:#fff;;}
.header_wrap.active {background: rgba(255,255,255,.5)}
.header_wrap.active .logo {color:#222; transition: color .5s;}

/* 가운데 고정 내용 */
.fix_tit {position: fixed; left:50%; top:50%; font-family: 'NotoB'; font-size:60px; line-height: 1; color:#fff; transform:translate(-50%, -50%); -webkit-transform:translate(-50%, -50%); -moz-transform:translate(-50%, -50%); -o-transform:translate(-50%, -50%); -ms-transform:translate(-50%, -50%); opacity: .6;}
.fix_tit.black {position:static;color:#000; transition:color .5s}
.fix_tit.black span {border-color: rgba(000,000,000,.6);}


/* 섹션, 네비게이션 */
.section {overflow: hidden; height: 1440px; background-size:cover;}
.section.fixed {background-attachment: fixed;}
.content{position:relative;left:50%; top:50%; font-family: 'NotoB';}

.nav_list {position:fixed; right:50px; top:50%; z-index:1000; transform:translateY(-50%); -webkit-transform:translateY(-50%); -moz-transform:translateY(-50%); -ms-transform:translateY(-50%);}
.nav_list li {margin-bottom:15px;}
.nav_list li a {position:relative; display:block; color:#fff; transition:.5s; -webkit-transition:.5s; -moz-transition:.5s; -o-transition:.5s; -ms-transition:.5s;}
.nav_list li a .fa {position:absolute; left:-20px; top:5px; width:16px; height:16px; background-image:url('../images/icon_p.png'); background-size:cover; background-position: 0px 0px; transition:transform .5s; -webkit-transition:transform .5s; -moz-transition:transform .5s; -o-transition:transform .5s; -ms-transition:transform .5s; }
.nav_list li a.active {color:#f0582b;}
.nav_list li a.active .fa {background-position: 0px 16px; transform:rotate(360deg);}
.nav_list li a:hover, .nav_list li a:focus {color:#f0582b; text-decoration: none;}

/* 마스크 */
.fix_motion {position: relative; height: 5000px;}
.fix_motion .sticky_cont {overflow: hidden; position: sticky; position: -webkit-sticky; top:0; left: 0; width: 100%; height: 100vh;}
.fix_motion .sticky_cont .cont_box {position:relative; height: 100%;}
.fix_motion .sticky_cont .cont_box .intro_txt {position:absolute; left:50%; top:50%; z-index:60; transform:translate(-50%,-50%); -webkit-transform:translate(-50%,-50%); -moz-transform:translate(-50%,-50%); -o-transform:translate(-50%,-50%); -ms-transform:translate(-50%,-50%); transition: opacity .5s;}
.fix_motion .sticky_cont .cont_box .intro_txt h2 {font-size: 80px; line-height: 1; color:#fff;}
.fix_motion .sticky_cont .cont_box .intro_txt.active {opacity: 0;}
.fix_motion .sticky_cont .cont_box .left_mask {position: absolute; left:0; top:0; z-index:50; width:50%; height: 100%; background: #000; }
.fix_motion .sticky_cont .cont_box .right_mask {position: absolute; right:0; top:0; z-index:50; width:50%; height: 100%; background: #000; }
.fix_motion .sticky_cont .cont_box .bg_img {position:absolute; left:0; top:0; z-index:20; width: 100%; height: 100%; background-image: url('../images/steve_jobs.jpg'); background-size: auto 100%; background-repeat: no-repeat; background-position: center center;}
.fix_motion .sticky_cont .cont_box .ending_txt {position: absolute; left:0; top:0; z-index:30; width: 100%; height: 100%; opacity:0; transition:opacity 1s;}
.fix_motion .sticky_cont .cont_box .ending_txt:after {position: absolute; left:0; top:0; z-index:-1; width: 100%; height: 100%; background: rgba(255,255,255,1); content:"";}
.fix_motion .sticky_cont .cont_box .ending_txt.active {opacity: 1;}
.fix_motion .sticky_cont .cont_box .ending_txt .tb_row {display: table; width: 100%; height: 100%;}
.fix_motion .sticky_cont .cont_box .ending_txt .tb_row .tb_cell {display: table-cell; vertical-align: middle; text-align: center;}
.fix_motion .sticky_cont .cont_box .ending_txt .tb_row .tb_cell p {font-size: 80px; color:#000; line-height: 1;}
</style>
<body>
	<div class="wrap">
		<header class="header_wrap">
			<div class="logo">Younghoon</div>
		</header>
		<section id="a" class="section fixed" style="background-image: url('../images/img_blur01.jpg')">
			<h2 class="fix_tit"> <!-- 타이틀 -->
				<div>개발자 유영훈</div>
				<div>포트폴리오 :)</div>
			</h2>
		</section>
		<section class="fix_motion"> <!-- 스크롤할 거리를 설정하는 엘리먼트 -->
			<article class="sticky_cont"> <!-- 고정시킬 엘리먼트 sticky -->
				<div class="cont_box ">
					<div class="intro_txt">
						<h2>
							개발자
						</h2>
					</div>
					<div class="left_mask"></div>
					<div class="right_mask"></div>
					<!-- <figure class="bg_img"></figure> -->
					<div class="ending_txt">
						<div class="tb_row">
							<div class="tb_cell">
								<p>
									유영훈
								</p>
							</div>
						</div>
					</div>
				</div>
			</article>
		</section>
		<section id="c" class="section" style="background-image: url('../images/3.jpg')"></section>
		<section id="d" class="section fixed" style="background-image: url('../images/4.jpg')"></section>
		<section id="e" class="section" style="background-image: url('../images/5.jpg')"></section>
		<section id="f" class="section" style="background-image: url('../images/6.jpg')"></section>
		<section id="g" class="section" style="background-image: url('../images/7.jpg')"></section>
		<section id="h" class="section" style="background-image: url('../images/8.jpg')"></section>
		
		<ul class="nav_list"> <!-- 네비게이션 -->
			<li>
				<a href="#a" class="active">
					<i class="fa"></i>
					<span>Younghoon</span>
				</a>
			</li>
			<li>
				<a href="#b">
					<i class="fa"></i>
					<span>Younghoon</span>
				</a>
			</li>
			<li>
				<a href="#c">
					<i class="fa"></i>
					<span>Potfolio</span>
				</a>
			</li>
			<li>
				<a href="#d">
					<i class="fa"></i>
					<span>Ending</span>
				</a>
			</li>
			<li>
				<a href="#e">
					<i class="fa"></i>
					<span>BLUE SKY</span>
				</a>
			</li>
			<li>
				<a href="#f">
					<i class="fa"></i>
					<span>LONELY</span>
				</a>
			</li>
			<li>
				<a href="#g">
					<i class="fa"></i>
					<span>ELEGANCE</span>
				</a>
			</li>
			<li>
				<a href="#h">
					<i class="fa"></i>
					<span>SPACE</span>
				</a>
			</li>
		</ul>
	</div>
<script>
	var winScrollTop;
	var scrollHeight;
	var sectionOffsetTop;
	var sectionScrolTop;
	var scrollRealHeight;
	var scrollPerecnt;
	var percent;

	var scrollBody = $('.fix_motion');
	var titText = scrollBody.find('.intro_txt');
	var maskLeft = scrollBody.find('.left_mask');
	var maskRight = scrollBody.find('.right_mask');
	var bgImage = scrollBody.find('.bg_img');
	var endingContent = scrollBody.find('.ending_txt');
	var section = $('.section');
	var offsetTop = [];
	var offsetBottom = [];

	
	function setValue() {
		
		winScrollTop = $(window).scrollTop();
		section.each(function(index,obj) {

			offsetTop[index] = $(obj).offset().top;
			offsetBottom[index] = offsetTop[index] + $(obj).height();
		});
		scrollHeight = scrollBody.height();
		sectionOffsetTop = scrollBody.offset().top;
		scrollRealHeight = (scrollHeight - $(window).height());
		sectionScrolTop = winScrollTop - sectionOffsetTop;

		scrollPerecnt =  sectionScrolTop / scrollRealHeight;
		percent = scrollPerecnt * 100 ;
	};

	function checkInSection() {
		motionRender();
		if(winScrollTop >= offsetTop[0] && offsetBottom[0] > winScrollTop) {
			sectionActive(0);
		} else if(winScrollTop >= offsetTop[1] && offsetBottom[1] > winScrollTop) {
			sectionActive(1);
		} else if(winScrollTop >= offsetTop[2] && offsetBottom[2] > winScrollTop) {
			sectionActive(2);
		} else if(winScrollTop >= offsetTop[3] && offsetBottom[3] > winScrollTop) {
			sectionActive(3);
		} else if(winScrollTop >= offsetTop[4] && offsetBottom[4] > winScrollTop) {
			sectionActive(4);
		} else if(winScrollTop >= offsetTop[5] && offsetBottom[5] > winScrollTop) {
			sectionActive(5);
		} else if(winScrollTop >= offsetTop[6] && offsetBottom[6] > winScrollTop) {
			sectionActive(6);
		} else if(winScrollTop >= offsetTop[7] && offsetBottom[7] > winScrollTop) {
			sectionActive(7);
		}
	};

	function motionRender() {

		var maskStartValue = 50;
		var maskEndValue = 0;
		var zoomValue = 1.5;
		var zoomOutValue = 1;
		var maskVal = Math.max(maskEndValue, maskStartValue - (scrollPerecnt * maskStartValue));
		var scaleVal = Math.max(zoomOutValue, zoomValue - (scrollPerecnt * zoomValue));

		maskLeft
		.css({
			width: maskVal + '%'
		});

		maskRight
		.css({
			width: maskVal + '%'
		});

		bgImage
		.css({
			'transform': 'scale('+ scaleVal +')'
		});

		if(percent > 0.3){
			titText.addClass('active');
		}else{
			titText.removeClass('active');
		}

		if(percent >= 70) {
			endingContent.addClass('active');
		} else {
			endingContent.removeClass('active');
		}
	};

	function sectionActive(index) {

		listActive(index);
		changeText(index);
		welcome(index);
	};

	function listActive(index) {

		var list = $('.nav_list li a');
			list.removeClass('active');
			list.eq(index).addClass('active');
	};

	function changeText(index) {

		var targetText = $('.fix_tit strong');
		var list = $('.nav_list li a span');
		var getText = list.eq(index).text()

		// targetText.text(getText);
	};

	function welcome(index) {
		var targetText = $('.fix_tit');

		if(index === 1 || index === 2) {
			targetText.addClass('black');
		} else {
			targetText.removeClass('black');
		}
	};

	function init() {
		setValue();
		checkInSection();
		changeOverlap();
	};

	$(window).scroll(function() {
		winScrollTop = $(window).scrollTop();
		checkInSection();
	});

	$(window).resize(function() {

		setValue();
		checkInSection();
	});

	$('.nav_list li a').click(function(e) {
		console.log($(this.hash).offset());
		if($(this.hash).offset()) {
			$('html')
			.animate({
				scrollTop:$(this.hash).offset().top
			}, 300);
		}
	});

$(function() {
	init();
});
</script>
</body>
</html>
